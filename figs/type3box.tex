
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}[
edge from parent path=,
level distance=2cm,
level 1/.style={sibling distance=0.45cm}
%,scale=1, every node/.style={transform shape}
]

  \tikzstyle{ref}=[circle,fill=black,inner sep=0.5mm]
%  \tikzstyle{ref2}=[circle,fill=black!40,inner sep=0.5mm]
  \tikzstyle{dashdot}=[dashed,dash pattern=on 2pt off 1pt on 0.5pt off 1pt]
  \tikzstyle{mysnake}=[decorate,decoration={snake,amplitude=0.3mm,segment length=0.75cm}]

  \node (c1) {}
%    child { node (c11) {} }
    child { node (c12) {} }
    child { node (c13) [ref,label={below:$\overline{1}$}] {} }
    child { node (c14) {} };
%    child { node (c15) {} };

  \node (c10) [node distance=0.3cm,inner sep=0pt,above of=c1,label={above:$IN$}] {$0$};

%  \draw [join=round] (c1.center)
%    to (c11.center)
%    to [bend left] (c12.center)
%    -- cycle;

  \draw [join=round] (c12.center)
    to [bend left](c13.center) 
    to [bend right] (c14.center)
    to (c1.center) -- cycle;

%  \draw [join=round] (c14.center)
%    to [bend right] (c15.center)
%    to (c1.center);

  \node (c2) [node distance=1.5cm,right of=c1] {}
%    child { node (c22) {} }
    child { node (c23) {} }
    child { node (c24) [ref,label={below:$\overline{0}$}] {} }
    child { node (c25) {} };
%    child { node (c26) {} };

  \node (c20) [node distance=0.3cm,inner sep=0pt,above of=c2,label={above:$OUT$}] {$1$};

  \draw [join=round] (c2.center) -- (c23.center);

%  \draw [join=round] (c2.center)
%    to (c22.center) 
%    to [bend right] (c23.center)
%    -- cycle;

  \draw [join=round] (c23.center)
	to [bend left] (c24.center)
    to [bend right] (c25.center)
    to (c2.center) -- cycle;

%  \draw [join=round] (c25.center)
%    to [bend left] (c26.center) 
%    to (c2.center);

  \node [yshift=0.8cm,node distance=0.95cm,left of=c1] {$B$};

  \begin{pgfonlayer}{background}
  \node [rounded corners=4pt,draw,fill=black!5,fit=(c1) (c10) (c12) (c14) (c2) (c20) (c23) (c25),inner sep=0.67cm] {};

  \path [right color=white,left color=black!40,shading=axis] (c12.center)
    to [bend left] (c13.center)
    to [bend right] (c14.center)
    to (c1.center);
  \draw [mysnake,dashdot] (c1.center) -- (c13.center);

  \path [left color=white,right color=black!40,shading=axis] (c23.center)
    to [bend left] (c24.center)
    to [bend right] (c25.center)
    to (c2.center);
  \draw [mysnake,dashdot] (c2.center) -- (c24.center);
  \end{pgfonlayer}

\end{tikzpicture}
